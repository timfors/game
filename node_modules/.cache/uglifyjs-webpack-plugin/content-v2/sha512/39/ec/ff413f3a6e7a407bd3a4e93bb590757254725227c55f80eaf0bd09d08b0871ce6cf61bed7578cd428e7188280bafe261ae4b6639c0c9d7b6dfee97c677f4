{"code":"!function(e){var t={};function r(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},r.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";function s(e,t){return Math.floor(Math.random()*(t-e))+e}r.r(t);class o{constructor(){this.isJump=!1}trow(){return s(1,7)}}const n=function*(){for(let e=1;e<1/0;e++)yield e}();class a{constructor(){this.isFinished=!1,this.pos=0,this.id=n.next().value}moveTo(e){this.pos=e.pos}}const i=function*(){for(let e=1;e<1/0;e++)yield e}();class c{constructor(){this.pos=i.next().value}}class h extends c{constructor(){super(),this.type=\"smile\"}}class l extends c{constructor(){super(),this.type=\"question\"}}class u extends c{constructor(){super(),this.type=\"math\"}}class p extends c{constructor(){super(),this.type=\"empty\"}}function y(e){let t;switch(e){case 0:t=new h;break;case 1:t=new l;break;case 2:t=new u;break;case 3:t=new p}return t}const d=new class{constructor(e){this.game=e,this.canvas=document.getElementById(\"game\")}drawBox(e){const t=document.getElementById(e.type),r=function(e){return e.pos%6==0?e.pos%12==0?150:750:e.pos%6*150}(e),s=function(e,t){return e.pos%6==0?t.height-180*e.pos/6:t.height-180*Math.floor(e.pos/6)-90}(e,this.canvas);$(\"#game\").drawRect({fromCenter:!1,layer:!0,width:150,height:90,x:r,y:s,strokeStyle:\"gray\",strokeWidth:3}).drawImage({fromCenter:!1,layer:!0,source:t,x:r+10,y:s+5,width:130,height:80})}drawBoxes(){$(\"#game\").drawRect({fromCenter:!1,width:150,height:90,x:0,y:this.canvas.height-90,strokeStyle:\"gray\",strokeWidth:3,layer:!0}),this.game.boxRep.forEach(e=>this.drawBox(e))}drawBones(){$(\"#game\").drawRect({name:\"bones\",fromCenter:!1,x:10,y:400,width:120,height:140,strokeStyle:\"black\",strokeWidth:5,layer:!0,add:e=>this.changeFacet(e.x,e.y,s(1,7))})}changeFacet(e,t,r){$(\"#game\").removeLayer(\"facet\"),$(\"#game\").drawImage({source:document.getElementById(`facet_${r}`),fromCenter:!1,name:\"facet\",layer:!0,width:110,height:130,x:e+5,y:t+5,click:e=>{if(!this.game.bones.isJump){const e=this.game.dropBone();this.game.bones.isJump=!0,$(\"#game\").animateLayer(\"bones\",{y:\"-=150\"},{duration:1e3,step:(e,t,r)=>this.changeFacet(r.x,r.y,s(1,7)),easing:\"swing\"}),$(\"#game\").animateLayer(\"bones\",{y:\"+=150\"},{duration:1e3,step:(e,t,r)=>this.changeFacet(r.x,r.y,s(1,7)),easing:\"swing\",complete:t=>{this.game.bones.isJump=!1,this.changeFacet(t.x,t.y,e)}})}}})}drawPlayer(e){const t=`rgb(${s(0,257)},${s(0,257)}, ${s(0,257)} )`;$(\"#game\").drawRect({layer:!0,fromCenter:!1,name:String(e.id),x:function(e){return 30*e.id}(e),y:function(e,t){return e.id%2==0?t.height-50:t.height-100}(e,this.canvas),width:15,height:40,fillStyle:t})}drawAllPlayers(){this.game.playerRep.forEach(e=>this.drawPlayer(e))}}(new class{constructor(e){this.playerCount=e.playerCount,this.playerRep=[];for(let e=0;e<this.playerCount;e++)this.playerRep.push(new a);if(this.boxCount=e.boxCount,this.boxRep=[],this.boxSeq=e.boxSeq,\"standart\"===this.boxSeq)for(let e=0;e<this.boxCount;e++)this.boxRep.push(y(e%4));this.bones=new o,this.choosePlayer=function*(e){for(let t=0;t<1/0;t++){let r=e[t%e.length];r.isFinished||(yield r)}}(this.playerRep)}dropBone(){currentPlayer=this.choosePlayer.next().value;const e=this.bones.trow();if(currentPlayer.pos+=e,currentPlayer.pos>=this.boxCount){currentPlayer.isFinished=!0;var t=this.boxRep[this.boxRep.length-1]}else t=this.boxRep[this.currentPlayer.pos-1];return currentPlayer.moveTo(t),console.log(`${this.playerRep[0].pos} | ${this.playerRep[1].pos}`),[e,this.currentPlayer]}}({playerCount:4,boxCount:18,boxSeq:\"standart\"}));d.drawBoxes(),d.drawAllPlayers(),d.drawBones()}]);","extractedComments":[]}