{"code":"!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},s.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=0)}([function(e,t,s){\"use strict\";function o(e,t){return Math.floor(Math.random()*(t-e))+e}s.r(t);class n{constructor(){this.isJump=!1}trow(){return o(1,7)}}class r{constructor(){this.isFinished=!1,this.pos=0}moveTo(e){return this.pos=e.pos,e}}const a=function*(){for(let e=1;e<1/0;e++)yield e}();class i{constructor(){this.pos=a.next().value}}class c extends i{constructor(){super(),this.type=\"smile\"}}class h extends i{constructor(){super(),this.type=\"question\"}}class u extends i{constructor(){super(),this.type=\"math\"}}class l extends i{constructor(){super(),this.type=\"empty\"}}function p(e){let t;switch(e){case 0:t=new c;case 1:t=new h;case 2:t=new u;case 3:t=new l}return t}function y(e){return e.pos%6==0?(x=e.pos%12==0?0:500,x):e.pos%6*100}const d=new class{constructor(e){this.game=e,this.canvas=document.getElementById(\"game\")}drawBox(e){const t=document.getElementById(e.type),s=y(e),o=function(e,t){return e.pos%6==0?t-180*e.pos/6:t-180*Math.floor(e.pos/7)}(e,this.canavas);$(\"#game\").drawRect({layer:!0,width:100,height:90,x:s,y:o,strokeStyle:\"gray\",strokeWidth:3}).drawImage({layer:!0,source:t,x:s+5,y:o+5,width:90,height:80})}drawBoxes(){this.game.boxRep.forEach(e=>this.drawBox(e))}drawBones(){$(\"#game\").drawRect({name:\"bones\",x:this.canvas.width-200,y:this.canvas.height/2,layer:!0,width:120,height:140,strokeStyle:\"black\",strokeWidth:5,app:e=>changeFacet(e.x,e.y,o(1,7))})}changeFacet(e,t,s){$(\"#game\").removeLayer(\"facet\"),$(\"#game\").drawImage({source:document.getElementById(`facet_${s}`),name:\"facet\",layer:\"true\",width:100,height:110,x:e,y:t,click:e=>{if(!this.game.bones.isJump){const e=this.game.dropBone();this.isJump=!0,$(\"#game\").animateLayer(\"bones\",{y:\"-=150\"},{duration:1e3,step:(e,t,s)=>this.changeFacet(s.x,s.y,o(1,7)),easing:\"swing\"}),$(\"#game\").animateLayer(\"bones\",{y:\"+=150\"},{duration:1e3,step:(e,t,s)=>this.changeFacet(s.x,s.y,o(1,7)),easing:\"swing\",complete:t=>this.changeFacet(t.x,t.y,e)})}}})}}(new class{constructor(e){this.playerCount=e.playerCount,this.playerRep=[];for(let e=0;e<this.playerCount;e++)this.playerRep.push(new r);if(this.boxCount=e.boxCount,this.boxRep=[],this.boxSeq=e.boxSeq,\"standart\"===this.boxSeq)for(let e=0;e<this.boxCount;e++)this.boxRep.push(p(e%4));this.bones=new n,this.choosePlayer=function*(e){for(let t=0;t<1/0;t++){let s=e[t%e.length];s.isFinished||(yield s)}}(this.playerRep),this.currentPlayer=this.choosePlayer.next().value}dropBone(){const e=this.bones.trow();return this.currentPlayer.position+=e,this.currentPlayer.position>this.boxCount?(this.currentPlayer.isFinished=!0,this.boxRep[boxRep.length-1]):this.boxRep[this.currentPlayer.position],this.currentPlayer.moveTo(box),this.currentPlayer=this.choosePlayer.next(),e}}({playerCount:2,boxCount:18,boxSeq:\"standart\"}));d.drawBoxes(),d.drawBones()}]);","extractedComments":[]}