{"code":"!function(e){var t={};function s(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},s.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=0)}([function(e,t,s){\"use strict\";function o(e,t){return Math.floor(Math.random()*(t-e))+e}s.r(t);class r{constructor(){this.isJump=!1}trow(){return o(1,7)}}const n=function*(){for(let e=1;e<1/0;e++)yield e}();class a{constructor(){this.isFinished=!1,this.pos=0,this.id=n.next().value}moveTo(e){this.pos=e.pos}}const i=function*(){for(let e=1;e<1/0;e++)yield e}();class c{constructor(){this.pos=i.next().value}}class h extends c{constructor(){super(),this.type=\"smile\"}}class l extends c{constructor(){super(),this.type=\"question\"}}class u extends c{constructor(){super(),this.type=\"math\"}}class p extends c{constructor(){super(),this.type=\"empty\"}}function d(e){let t;switch(e){case 0:t=new h;break;case 1:t=new l;break;case 2:t=new u;break;case 3:t=new p}return t}function y(e){return 30*e.id}function g(e,t){return e.id%2==0?t.height-50:t.height-100}const m=new class{constructor(e){this.game=e,this.canvas=document.getElementById(\"game\")}drawBox(e){const t=document.getElementById(e.type),s=function(e){return e.pos%6==0?e.pos%12==0?150:750:e.pos%6*150}(e),o=function(e,t){return e.pos%6==0?t.height-180*e.pos/6:t.height-180*Math.floor(e.pos/6)-90}(e,this.canvas);$(\"#game\").drawRect({fromCenter:!1,layer:!0,width:150,height:90,x:s,y:o,strokeStyle:\"gray\",strokeWidth:3}).drawImage({fromCenter:!1,layer:!0,source:t,x:s+10,y:o+5,width:130,height:80})}drawBoxes(){$(\"#game\").drawRect({fromCenter:!1,width:150,height:90,x:0,y:this.canvas.height-90,strokeStyle:\"gray\",strokeWidth:3,layer:!0}),this.game.boxRep.forEach(e=>this.drawBox(e))}drawBones(){$(\"#game\").drawRect({name:\"bones\",fromCenter:!1,x:10,y:400,width:120,height:140,strokeStyle:\"black\",strokeWidth:5,layer:!0,add:e=>this.changeFacet(e.x,e.y,o(1,7))})}changeFacet(e,t,s){$(\"#game\").removeLayer(\"facet\"),$(\"#game\").drawImage({source:document.getElementById(`facet_${s}`),fromCenter:!1,name:\"facet\",layer:!0,width:110,height:130,x:e+5,y:t+5,click:e=>{if(!this.game.bones.isJump){const{points:e,player:t}=this.game.dropBone();console.log(t),this.game.bones.isJump=!0,$(\"#game\").animateLayer(\"bones\",{y:\"-=150\"},{duration:1e3,step:(e,t,s)=>this.changeFacet(s.x,s.y,o(1,7)),easing:\"swing\"}),$(\"#game\").animateLayer(\"bones\",{y:\"+=150\"},{duration:1e3,step:(e,t,s)=>this.changeFacet(s.x,s.y,o(1,7)),easing:\"swing\",complete:s=>{this.game.bones.isJump=!1,this.changeFacet(s.x,s.y,e),$(\"#game\").animateLayer(String(t.id),{x:s.x+y(t),y:s.y+g(t)},1500)}})}}})}drawPlayer(e){const t=`rgb(${o(0,257)},${o(0,257)}, ${o(0,257)} )`;$(\"#game\").drawRect({layer:!0,fromCenter:!1,name:String(e.id),x:y(e),y:g(e,this.canvas),width:15,height:40,fillStyle:t})}drawAllPlayers(){this.game.playerRep.forEach(e=>this.drawPlayer(e))}}(new class{constructor(e){this.playerCount=e.playerCount,this.playerRep=[];for(let e=0;e<this.playerCount;e++)this.playerRep.push(new a);if(this.boxCount=e.boxCount,this.boxRep=[],this.boxSeq=e.boxSeq,\"standart\"===this.boxSeq)for(let e=0;e<this.boxCount;e++)this.boxRep.push(d(e%4));this.bones=new r,this.choosePlayer=function*(e){for(let t=0;t<1/0;t++){let s=e[t%e.length];s.isFinished||(yield s)}}(this.playerRep)}dropBone(){const e=this.choosePlayer.next().value,t=this.bones.trow();if(e.pos+=t,e.pos>=this.boxCount){e.isFinished=!0;var s=this.boxRep[this.boxRep.length-1]}else s=this.boxRep[e.pos-1];return e.moveTo(s),[t,e]}}({playerCount:4,boxCount:18,boxSeq:\"standart\"}));m.drawBoxes(),m.drawAllPlayers(),m.drawBones()}]);","extractedComments":[]}