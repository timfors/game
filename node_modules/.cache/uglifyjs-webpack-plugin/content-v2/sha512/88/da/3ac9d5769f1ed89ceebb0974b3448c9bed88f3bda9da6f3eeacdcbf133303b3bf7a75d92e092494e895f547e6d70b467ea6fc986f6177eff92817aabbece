{"code":"!function(e){var t={};function s(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},s.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=0)}([function(e,t,s){\"use strict\";function r(e,t){return Math.floor(Math.random()*(t-e))+e}s.r(t);class o{constructor(){this.isJump=!1}trow(){return r(1,7)}}const n=function*(){for(let e=1;e<1/0;e++)yield e}();class a{constructor(){this.isFinished=!1,this.pos=0,this.id=n.next().value}moveTo(e){this.pos=e.pos}}const i=function*(){for(let e=1;e<1/0;e++)yield e}();class h{constructor(){this.pos=i.next().value}}class c extends h{constructor(){super(),this.type=\"smile\"}}class l extends h{constructor(){super(),this.type=\"question\"}}class u extends h{constructor(){super(),this.type=\"math\"}}class p extends h{constructor(){super(),this.type=\"empty\"}}function y(e){let t;switch(e){case 0:t=new c;break;case 1:t=new l;break;case 2:t=new u;break;case 3:t=new p}return t}const d=new class{constructor(e){this.game=e,this.canvas=document.getElementById(\"game\")}drawBox(e){const t=document.getElementById(e.type),s=function(e){return e.pos%6==0?e.pos%12==0?150:750:e.pos%6*150}(e),r=function(e,t){return e.pos%6==0?t.height-180*e.pos/6:t.height-180*Math.floor(e.pos/6)-90}(e,this.canvas);$(\"#game\").drawRect({fromCenter:!1,layer:!0,width:150,height:90,x:s,y:r,strokeStyle:\"gray\",strokeWidth:3}).drawImage({fromCenter:!1,layer:!0,source:t,x:s+10,y:r+5,width:130,height:80})}drawBoxes(){$(\"#game\").drawRect({fromCenter:!1,layer:!0,width:150,height:90,x:0,y:this.canvas.height-90,strokeStyle:\"gray\",strokeWidth:3}),this.game.boxRep.forEach(e=>this.drawBox(e))}drawBones(){$(\"#game\").drawRect({name:\"bones\",fromCenter:!1,x:10,y:400,layer:!0,width:120,height:140,strokeStyle:\"black\",strokeWidth:5,add:e=>this.changeFacet(e.x,e.y,r(1,7))})}changeFacet(e,t,s){$(\"#game\").removeLayer(\"facet\"),$(\"#game\").drawImage({source:document.getElementById(`facet_${s}`),fromCenter:!1,name:\"facet\",layer:\"true\",width:110,height:130,x:e+5,y:t+5,click:e=>{if(!this.game.bones.isJump){const e=this.game.dropBone();this.game.bones.isJump=!0,$(\"#game\").animateLayer(\"bones\",{y:\"-=150\"},{duration:1e3,step:(e,t,s)=>this.changeFacet(s.x,s.y,r(1,7)),easing:\"swing\"}),$(\"#game\").animateLayer(\"bones\",{y:\"+=150\"},{duration:1e3,step:(e,t,s)=>this.changeFacet(s.x,s.y,r(1,7)),easing:\"swing\",complete:t=>{this.game.bones.isJump=!1,this.changeFacet(t.x,t.y,e)}})}}})}drawPlayer(e){const t=`rgb(${r(0,257)},${r(0,257)}, ${r(0,257)} )`;$(\"#game\").drawRect({name:String(e.id),x:function(e){return 30*e.id}(e),y:function(e,t){return e.id%2==0?t.height-10:t.height-60}(e,this.canvas),width:15,height:40,fillStyle:t,layer:!0})}drawAllPlayers(){this.game.playerRep.forEach(e=>this.drawPlayer(e))}}(new class{constructor(e){this.playerCount=e.playerCount,this.playerRep=[];for(let e=0;e<this.playerCount;e++)this.playerRep.push(new a);if(this.boxCount=e.boxCount,this.boxRep=[],this.boxSeq=e.boxSeq,\"standart\"===this.boxSeq)for(let e=0;e<this.boxCount;e++)this.boxRep.push(y(e%4));this.bones=new o,this.choosePlayer=function*(e){for(let t=0;t<1/0;t++){let s=e[t%e.length];s.isFinished||(yield s)}}(this.playerRep),this.currentPlayer=this.choosePlayer.next().value}dropBone(){const e=this.bones.trow();if(this.currentPlayer.pos+=e,this.currentPlayer.pos>=this.boxCount){this.currentPlayer.isFinished=!0;var t=this.boxRep[this.boxRep.length-1]}else t=this.boxRep[this.currentPlayer.pos-1];return this.currentPlayer.moveTo(t),console.log(`${this.playerRep[0].pos} | ${this.playerRep[1].pos}`),this.currentPlayer=this.choosePlayer.next().value,e}}({playerCount:2,boxCount:11,boxSeq:\"standart\"}));d.drawBoxes(),d.drawBones(),d.drawAllPlayers()}]);","extractedComments":[]}